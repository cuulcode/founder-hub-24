# Chrome Extension Setup Instructions

## âœ… What's Been Created

All Chrome extension files have been created in the `chrome-extension/` folder. The webapp remains completely untouched and will continue to work on Vercel.

## ğŸ”§ Required Setup Steps

### Step 1: Install Required Dependencies

Run this command from your project root:

```bash
npm install --save-dev fs-extra glob
```

### Step 2: Add Build Script to package.json

You need to manually add one script to your `package.json` file.

Open `package.json` and add this to the `"scripts"` section:

```json
{
  "scripts": {
    "build:extension": "node chrome-extension/build-extension.js",
    // ... your other existing scripts
  }
}
```

### Step 3: Add Icons (Optional but Recommended)

Create or add your extension icons to `chrome-extension/icons/`:
- `icon16.png` (16x16 pixels)
- `icon32.png` (32x32 pixels)  
- `icon48.png` (48x48 pixels)
- `icon128.png` (128x128 pixels)

If you skip this step, the extension will work but use default Chrome icons.

## ğŸš€ Building the Extension

### First Time Build

```bash
# 1. Build the webapp
npm run build

# 2. Build the extension
npm run build:extension
```

This creates a `dist-extension/` folder with everything needed for the Chrome extension.

### Future Builds

Every time you make changes, just run:

```bash
npm run build && npm run build:extension
```

## ğŸ§ª Testing the Extension Locally

1. Open Chrome and go to `chrome://extensions/`
2. Enable **Developer mode** (toggle in top-right corner)
3. Click **Load unpacked**
4. Select the `dist-extension/` folder from your project
5. The extension is now installed!

### Test Side Panel Mode

- Click the extension icon in Chrome toolbar
- Side panel should open on the right
- All features should work identically to the web app

### Test Full Page Mode

- Right-click the extension icon
- Select "Open in Full Page" from context menu
- Opens in a new tab with full screen space

## ğŸ“¦ Preparing for Chrome Web Store

### Step 1: Build Production Version

```bash
npm run build && npm run build:extension
```

### Step 2: Create ZIP File

**On Mac/Linux:**
```bash
cd dist-extension
zip -r ../project-hub-extension.zip .
cd ..
```

**On Windows:**
```cmd
cd dist-extension
tar -a -c -f ..\project-hub-extension.zip *
cd ..
```

Or use a GUI tool like 7-Zip to create a zip of the `dist-extension/` contents.

### Step 3: Prepare Store Listing Materials

You'll need:
- **Extension name**: Project Hub - Multi-Company Manager
- **Description**: (Write 1-2 paragraphs explaining what it does)
- **Screenshots**: Take 3-5 screenshots (1280x800 recommended)
- **Privacy Policy URL**: Required if you collect user data
- **Category**: Productivity
- **Icons**: Ensure all 4 icon sizes are in place

### Step 4: Publish to Chrome Web Store

1. Go to [Chrome Web Store Developer Dashboard](https://chrome.google.com/webstore/devconsole/)
2. Pay $5 one-time developer fee (if not already paid)
3. Click **New Item**
4. Upload `project-hub-extension.zip`
5. Fill in all required fields
6. Submit for review (usually 1-3 days)

## ğŸ“‚ What Gets Downloaded from GitHub

When you download this project from GitHub, you'll have:

```
your-project/
â”œâ”€â”€ chrome-extension/          # â† Extension source files (commit to git)
â”‚   â”œâ”€â”€ manifest.json
â”‚   â”œâ”€â”€ background.js
â”‚   â”œâ”€â”€ sidepanel.html
â”‚   â”œâ”€â”€ fullpage.html
â”‚   â”œâ”€â”€ options.html
â”‚   â”œâ”€â”€ build-extension.js
â”‚   â”œâ”€â”€ icons/
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ dist-extension/            # â† Built extension (DO NOT commit to git)
â”‚   â””â”€â”€ (generated by build)
â”œâ”€â”€ src/                       # â† Your React app (unchanged)
â”œâ”€â”€ dist/                      # â† Webapp build (unchanged)
â””â”€â”€ ... other project files
```

**Important**: Add `dist-extension/` to your `.gitignore` (it's already in `chrome-extension/.gitignore`).

## ğŸ”„ Updating the Extension

To release an update:

1. Make your code changes in `src/`
2. Update version in `chrome-extension/manifest.json`:
   ```json
   {
     "version": "1.0.1"  // Increment this
   }
   ```
3. Rebuild:
   ```bash
   npm run build && npm run build:extension
   ```
4. Create new ZIP file
5. Upload to Chrome Web Store as an update

## ğŸ¯ Key Differences Between Web and Extension

| Feature | Web App | Extension |
|---------|---------|-----------|
| Routing | BrowserRouter | HashRouter (automatic) |
| URLs | `/page` | `/#/page` |
| Deployment | Vercel | Chrome Web Store |
| Updates | Automatic | User updates via Chrome |
| Access | Via URL | Via Chrome toolbar |

## âš ï¸ Important Notes

### Supabase Authentication

The extension uses the same Supabase setup as your web app. No additional configuration needed!

### Storage

The extension can use:
- `localStorage` (same as web)
- `chrome.storage.local` (optional, for syncing across devices)

Currently it uses localStorage by default.

### Environment Variables

The extension automatically inherits environment variables from your web build:
- `VITE_SUPABASE_URL`
- `VITE_SUPABASE_PUBLISHABLE_KEY`
- `VITE_SUPABASE_PROJECT_ID`

### Both Versions Can Coexist

- Your web app on Vercel: `https://yourdomain.com`
- Your Chrome extension: Side panel + full page modes
- Same codebase, same database, same authentication
- Users can use whichever they prefer!

## ğŸ› Troubleshooting

### "npm run build:extension" not found
- You forgot Step 2 above (adding the script to package.json)

### Missing dependencies error
- You forgot Step 1 above (installing fs-extra and glob)

### Extension won't load
- Check `chrome://extensions/` for error messages
- Ensure manifest.json is valid JSON
- Verify all file paths exist

### Icons not showing
- Add icons to `chrome-extension/icons/` folder
- Rebuild the extension
- Reload in `chrome://extensions/`

### Authentication not working
- Same Supabase setup as web app should work
- Check browser console for errors
- Verify VITE_SUPABASE_* variables are set

## ğŸ“š Additional Resources

- [Full README](./README.md) - Detailed documentation
- [Chrome Extension Docs](https://developer.chrome.com/docs/extensions/)
- [Chrome Web Store Policies](https://developer.chrome.com/docs/webstore/program-policies/)

## âœ¨ Summary

1. âœ… Extension files created in `chrome-extension/` folder
2. âš™ï¸ Install dependencies: `npm install --save-dev fs-extra glob`
3. âš™ï¸ Add build script to package.json
4. ğŸ¨ Add icons (optional but recommended)
5. ğŸ—ï¸ Build: `npm run build && npm run build:extension`
6. ğŸ§ª Test: Load `dist-extension/` in Chrome
7. ğŸ“¦ Publish: ZIP `dist-extension/` and upload to Chrome Web Store

Your web app remains completely unchanged and continues working on Vercel! ğŸ‰
